(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/offline-recorder/dist/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0a87":function(e,t,n){"use strict";n("1cc9")},"1cc9":function(e,t,n){},"29d8":function(e,t,n){"use strict";n("9a51")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("离线录音机")]),n("h4",[e._v("一款直接在浏览器中运行的录音机，数据离线实时保存（尚未适配手机）")]),n("div",{staticClass:"inner-card"},[n("el-collapse",{attrs:{accordion:""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("el-collapse-item",{attrs:{name:"1"}},[n("template",{slot:"title"},[n("div",{staticStyle:{"padding-left":"2rem"}},[e._v("功能")])]),n("h3",[e._v(" 断电，关闭浏览器或录音时间过长超出内存等问题，都不丢失数据，重新打开继续录 ")]),n("h3",[e._v("数据保存在浏览器中，存储在本地电脑上，保护隐私")]),n("h3",[e._v("支持同时录多份录音文件，不会出现不下载就消失的情况")]),n("h3",[e._v("在线播放器，可在线预览，选择下载")]),n("h3",[e._v("自动记录额外信息，如录音时间段，长度大小等")]),n("h3",[e._v(' 可添加为WebApp（打开Chrome浏览器点击地址栏右侧“安装recorder"，手机可打开手机版Chrome后，根据底部提示操作） ')])],2),n("el-collapse-item",{attrs:{name:"2"}},[n("template",{slot:"title"},[n("div",{staticStyle:{"padding-left":"2rem"}},[e._v("注意事项")])]),n("h3",[e._v(" 切记本录音机不能在同一浏览器上同时打开两个，否则会造成存储混乱，对数据产生不可预测破坏 ")]),n("h3",[e._v("请勿清除浏览器记录，录音文件及时下载防止丢失")]),n("h3",[e._v(" 录音占用空间过大或一次录音时间过长时可能发生存储加载延迟，出现播放列表短暂不显示，等待一段时间即可 ")])],2)],1)],1),n("div",{staticStyle:{"margin-top":"2rem"}}),n("div",[n("router-view")],1)])},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"cont",staticClass:"container",staticStyle:{background:"green"},style:{left:e.x+"px",top:e.y+"px"},on:{mouseover:function(t){return e.enter(t)},mouseout:function(t){return e.leave(t)},mousedown:function(t){return e.down(t)}}},[e._t("default")],2)},s=[],c={data:function(){return{x:0,y:0,beforeDrag:!1,draging:!1,dragX:0,dragY:0}},mounted:function(){var e=this;document.addEventListener("mousemove",(function(t){return e.move(t)})),document.addEventListener("mouseup",(function(t){return e.up(t)}))},methods:{isdrag:function(e){var t=e.target.dataset["draggable"];return!!t},enter:function(e){this.draging||this.isdrag(e)&&(this.beforeDrag=!0,this.draging=!1)},leave:function(e){this.draging||this.isdrag(e)&&(this.beforeDrag=!1,this.draging=!1)},move:function(e){this.draging&&(this.x=e.clientX-this.dragX,this.y=e.clientY-this.dragY,console.log(this.dragX,this.dragY))},down:function(e){if(e.currentTarget==this.$refs["cont"]){var t=e.currentTarget.getBoundingClientRect();this.dragX=e.clientX-t.left,this.dragY=e.clientY-t.top,console.log(this.dragX,this.dragY)}this.isdrag(e)&&this.beforeDrag&&(this.beforeDrag=!1,this.draging=!0)},up:function(e){this.draging&&(this.beforeDrag=!0,this.draging=!1),this.effect()},effect:function(){this.x<0&&(this.x=0),Math.abs(this.x)<20&&(this.x=0),Math.abs(this.y)<20&&(this.x=0)}}},u=c,l=(n("29d8"),n("2877")),d=Object(l["a"])(u,i,s,!1,null,"487e012f",null),f=d.exports,p={components:{GWidget:f},name:"App",data:function(){return{active:"2"}}},m=p,h=(n("034f"),Object(l["a"])(m,o,a,!1,null,null,null)),b=h.exports,w=n("5c96"),v=(n("0fae"),n("4380")),g=n("ead5"),y=n.n(g),x=n("3003"),R=n("9483");Object(R["a"])("".concat("/offline-recorder/dist/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var O=n("2f62"),k=n("2ef0"),_=n.n(k),j=n("5530"),I=n("1da1"),T=n("d4ec"),S=n("bee2"),N=n("ade3"),B=(n("b0c0"),n("96cf"),n("ec26")),E=n("3ad6"),M=n("5a0c"),D=n.n(M),H=n("2bd2");function $(){return{id:"record_".concat(Object(B["a"])()),name:"record_".concat(D()().format("YYYY-MM-DD HH:mm:ss")),startTime:new Date,endTime:new Date,points:[]}}function C(e){var t=L();return t.type="pause",t.data={pause_type:e,time:new Date},t}function L(){return{type:"point",data:null}}var U=function(){function e(){Object(T["a"])(this,e),Object(N["a"])(this,"recorder",null),Object(N["a"])(this,"onDataAvailable",new H["a"])}return Object(S["a"])(e,[{key:"ensureinit",value:function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==this.recorder){e.next=2;break}return e.abrupt("return");case 2:return t=navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),e.t0=MediaRecorder,e.next=6,t;case 6:e.t1=e.sent,e.t2={bitsPerSecond:128e3,audioBitrateMode:"variable",mimeType:"audio/webm"},n=new e.t0(e.t1,e.t2),this.recorder=n,n.addEventListener("dataavailable",(function(e){return r.onDataAvailable.next(e.data)}));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),P=new U,A=null,Y=function(){return{state:{mergedBlob:null,blobs:[],state:"normal",recordingInfo:null},mutations:{mergeBlob:function(e){e.mergedBlob=new Blob(e.blobs),e.blobs=[]},pushBlob:function(e,t){console.log("receive"),"recording"==e.state?e.blobs.push(t):console.error("状态错误，丢弃1帧")},addCheckPoint:function(e,t){if(null==e.recordingInfo)throw new Error("录制信息不存在，可能还没开始录音");e.recordingInfo.points.push(t)},setRecordingName:function(e,t){e.recordingInfo.name=t},switchState:function(e,t){switch(e.state){case"normal":"start"==t?(e.state="recording",e.recordingInfo=$()):Object(E["error"])("state和action不匹配");break;case"recording":if("pause"==t){e.state="paused";var n=C("pause");e.recordingInfo.points.push(n)}else"stop"==t?e.state="stopped":Object(E["error"])("state和action不匹配");break;case"paused":"stop"==t?e.state="stopped":"start"==t?(e.state="recording",e.recordingInfo.points.push(C("pause_resume"))):Object(E["error"])("state和action不匹配");break;case"stopped":"recover"==t?(e.state="normal",e.blobs=[],e.recordingInfo=null,e.mergedBlob=null):Object(E["error"])("state和action不匹配");break}}},getters:{recordingLength:function(e){return null==e.recordingInfo?null:e.blobs.length},historyBlobs:function(e){}},actions:{newRecorder:function(){return Object(I["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},startNew:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.ensureinit();case 2:"normal"==e.state.state?(e.commit("switchState","start"),A=P.onDataAvailable.subscribe((function(t){e.commit("pushBlob",t)})),P.recorder.start(1e3)):Object(E["error"])("还没恢复到未开始状态");case 3:case"end":return t.stop()}}),t)})))()},resume:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.ensureinit();case 2:if("paused"==e.state.state){t.next=5;break}return Object(E["error"])("并非在暂停状态，调用resume"),t.abrupt("return");case 5:e.commit("switchState","start"),P.recorder.resume();case 7:case"end":return t.stop()}}),t)})))()},pause:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("switchState","pause"),t.next=3,P.ensureinit();case 3:P.recorder.pause();case 4:case"end":return t.stop()}}),t)})))()},saveRecording:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit("switchState","stop"),n.next=3,P.ensureinit();case 3:return P.recorder.stop(),A.unsubscribe(),A=null,null!=t&&e.commit("setRecordingName",t),n.next=9,e.dispatch("storeToDisk");case 9:e.dispatch("tempcache/clearCache",null,{root:!0}),e.commit("switchState","recover");case 11:case"end":return n.stop()}}),n)})))()},storeToDisk:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return null==e.state.mergedBlob&&e.commit("mergeBlob"),t.next=3,e.dispatch("history/ensureInitHistory",null,{root:!0});case 3:return t.next=5,e.dispatch("history/pushHistory",{info:e.state.recordingInfo,blob:e.state.mergedBlob},{root:!0});case 5:case"end":return t.stop()}}),t)})))()},pushFrame:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.commit("pushBlob",t),e.dispatch("tempcache/pushItem",t,{root:!0});case 2:case"end":return n.stop()}}),n)})))()}}}},z=(n("d3b7"),n("ddb0"),n("13d5"),n("edfe")),V=Object(z["b"])("items","recording"),F=Object(z["b"])("infos","recording");function X(){return J.apply(this,arguments)}function J(){return J=Object(I["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(z["d"])(F);case 2:return e.next=4,e.sent.reduce((function(e,t){return e[t[0]]=t[1],e}),{});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function q(e){return W.apply(this,arguments)}function W(){return W=Object(I["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(z["e"])(t,V);case 2:if(n=e.sent,!n){e.next=7;break}return e.abrupt("return",n);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function G(e,t){return K.apply(this,arguments)}function K(){return K=Object(I["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,Object(z["g"])(r,n,V);case 3:return e.next=5,Object(z["g"])(r,t,F);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function Q(e){return Z.apply(this,arguments)}function Z(){return Z=Object(I["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(z["c"])(t,V);case 2:return e.next=4,Object(z["c"])(t,F);case 4:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return te=Object(I["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(z["a"])(F);case 2:return e.next=4,Object(z["a"])(V);case 4:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}var ne=function(){return{state:{isInited:!1,historyInfos:null},getters:{historyIdxs:function(e){return _.a.keys(e.historyInfos)}},mutations:{addHistoryItem:function(e,t){0==e.isInited&&Object(E["error"])("错误，还没初始化"),e.historyInfos=Object(j["a"])(Object(j["a"])({},e.historyInfos),{},Object(N["a"])({},t.id,t)),alert(t)},initHistoryInfo:function(e,t){e.isInited=!0,e.historyInfos=_.a.cloneDeep(t)},removeItem:function(e,t){0==context.state.isInited&&Object(E["error"])("错误，还没初始化"),t in e.historyInfos&&delete e.historyInfos[t]},updateInfo:function(e,t){var n=t.id,r=t.newInfo;0==e.isInited&&Object(E["error"])("错误，还没初始化"),n!=r.id&&Object(E["error"])("不能更新Item的id，id不可更改"),n in e.historyInfos&&(e.historyInfos[n]=r)}},actions:{pushHistory:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.info,o=t.blob,n.next=3,G(r,o);case 3:e.commit("addHistoryItem",r);case 4:case"end":return n.stop()}}),n)})))()},removeHistory:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Q(t);case 2:e.commit("removeItem",t);case 3:case"end":return n.stop()}}),n)})))()},renameHistory:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.id,o=t.newName,0==e.state.isInited&&Object(E["error"])("错误，还没初始化"),a=e.state.historyInfos[r],a.name=o,e.commit("updateInfo",{id:r,newInfo:a});case 5:case"end":return n.stop()}}),n)})))()},clearHistory:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ee();case 2:e.commit("initHistoryInfo",{});case 3:case"end":return t.stop()}}),t)})))()},ensureInitHistory:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.state.isInited){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,X();case 4:n=t.sent,e.commit("initHistoryInfo",n);case 6:case"end":return t.stop()}}),t)})))()},getItem:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(t in e.state.historyInfos)){n.next=9;break}if(r=e.state.historyInfos[t],o=q(t),null!=r&&null!=o){n.next=6;break}return console.error("获取记录时出现错误，存在空记录"),n.abrupt("return",null);case 6:return n.abrupt("return",{info:r,blob:o});case 9:return n.abrupt("return",null);case 10:case"end":return n.stop()}}),n)})))()}}}},re=function(){return new O["a"]({modules:{recorder:Object(j["a"])({namespaced:!0},Y()),history:Object(j["a"])({namespaced:!0},ne())}})},oe=n("8c4f"),ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("el-dialog",{attrs:{visible:e.showPlayer,fullscreen:""},on:{"update:visible":function(t){e.showPlayer=t}}},[n("div",{staticClass:"player"},[n("div",{staticClass:"player_info"},[n("h3",[e._v(" 当前录音:"+e._s(null==e.nowRecordInfo?"无":e.nowRecordInfo.name)+" ")]),null!=e.nowRecordInfo?n("div",[n("el-card",{attrs:{shadow:"never"}},[n("div",[e._v("名称:"+e._s(e.nowRecordInfo["name"]))]),n("div",[e._v("ID:"+e._s(e.nowRecordInfo["id"]))]),n("div",[e._v("长度:"+e._s(e.secondToTime(e.nowRecordInfo["length"])))]),n("div",[e._v("开始时间:"+e._s(e.formatDate(e.nowRecordInfo["startTime"])))]),n("div",[e._v("结束时间:"+e._s(e.formatDate(e.nowRecordInfo["endTime"])))])])],1):e._e(),n("div",{staticStyle:{"margin-top":"2rem"}}),n("div",[n("audio",{ref:"player",staticStyle:{outline:"none"},attrs:{src:e.src,controls:""}}),e._e()]),n("div",{staticStyle:{"margin-top":"2rem"}}),n("div",[n("el-button",{attrs:{type:"success"},on:{click:e.download}},[e._v("下载")]),n("el-dropdown",{staticStyle:{margin:"0 2rem"}},[n("el-button",{attrs:{type:"success"},on:{click:e.downloadAll}},[e._v(" 下载全部（悬浮查看更多）"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{on:{click:e.downloadAll_packed}},[e._v("打包下载全部（zip）")])],1)],1),n("el-button",{attrs:{type:"primary"},on:{click:e.clear}},[e._v("清除历史记录")])],1)]),n("div",{staticClass:"player_list"},[n("el-table",{attrs:{"max-height":"600",border:"",data:e.playList}},[n("el-table-column",{attrs:{label:"名称",prop:"name",sortable:""}}),n("el-table-column",{attrs:{label:"开始时间",width:"160px",prop:"startTime",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(e.formatDate(t.row.startTime)))])]}}])}),n("el-table-column",{attrs:{width:"130px",label:"大小",prop:"size",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(e.filesize(t.row.size)))])]}}])}),n("el-table-column",{attrs:{width:"100px",label:"长度",prop:"length",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(e._s(e.secondToTime(t.row.length)))])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"right","header-align":"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.select(t.row.id)}}},[e._v("查看")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.playlist_del(t.row.id)}}},[e._v("删除")]),n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(n){return e.playlist_download(t.row.id)}}},[e._v("下载")]),n("el-button",{attrs:{type:"info",size:"small"},on:{click:function(n){return e.playlist_rename(t.row.id)}}},[e._v("重命名")])]}}])})],1)],1)])]),n("el-dialog",{staticClass:"notedialog",attrs:{title:"输入内容",visible:e.noteContentVisible,width:"70%",fullscreen:"md"==e.$mq},on:{"update:visible":function(t){e.noteContentVisible=t}}},[n("mavon-editor",{staticStyle:{width:"100%"},style:{height:"60vh"},model:{value:e.nowEditNote.content,callback:function(t){e.$set(e.nowEditNote,"content",t)},expression:"nowEditNote.content"}})],1),n("el-dialog",{attrs:{"show-close":!1,title:"输入笔记",visible:e.isNoteEditing,width:"70%",fullscreen:"md"==e.$mq,"before-close":e.onnote_cancel},on:{"update:visible":function(t){e.isNoteEditing=t}}},[n("el-form",[n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{autofocus:""},model:{value:e.nowEditNote.title,callback:function(t){e.$set(e.nowEditNote,"title",t)},expression:"nowEditNote.title"}})],1),n("el-form-item",{attrs:{label:"简要描述"}},[n("el-input",{model:{value:e.nowEditNote.desc,callback:function(t){e.$set(e.nowEditNote,"desc",t)},expression:"nowEditNote.desc"}})],1),n("el-form-item",{staticStyle:{display:"flex","flex-direction":"row-reverse"}},[n("span",{staticStyle:{"margin-right":"3rem","font-size":"16px","font-weight":"bold"}},[e._v("已输入:"+e._s(e.nowEditNote.content.length)+"字")]),n("el-button",{attrs:{type:"primary"},on:{click:e.note_inputcontent}},[e._v("输入内容")])],1)],1),n("el-row",{staticStyle:{"margin-top":"1.5rem",display:"flex","justify-content":"space-around"}},[n("el-button",{on:{click:e.note_cancel}},[e._v("取消")]),n("el-button",{attrs:{type:"success"},on:{click:e.note_confirm}},[e._v("确认")])],1)],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.stopping||e.loading,expression:"stopping || loading"}],staticClass:"recorder"},[n("div",["video"==e.recordType?n("video",{ref:"record_video_player",attrs:{controls:""}}):e._e()]),n("h2",[e._v("当前录制:"+e._s(e.recordTime))]),n("div"),"video"==e.recordType?n("el-button",{attrs:{type:"primary"},on:{click:e.recordAudio}},[e._v("音频录制")]):e._e(),"normal"==e.nowState||"stopped"==e.nowState?n("el-button",{attrs:{type:"success"},on:{click:e.start}},[e._v("开始")]):e._e(),"paused"==e.nowState?n("el-button",{attrs:{type:"success"},on:{click:e.resume}},[e._v("继续")]):e._e(),"recording"==e.nowState?n("el-button",{attrs:{type:"primary"},on:{click:e.pause}},[e._v("暂停")]):e._e(),"recording"==e.nowState||"paused"==e.nowState?n("el-button",{attrs:{type:"danger"},on:{click:e.stop}},[e._v("停止")]):e._e(),"stopped"==e.nowState?n("el-button",{attrs:{type:"primary"},on:{click:e.download}},[e._v("下载当前录音")]):e._e(),"stopped"==e.nowState?n("el-button",{attrs:{type:"danger"},on:{click:e.removeNow}},[e._v("删除")]):e._e(),n("el-button",{attrs:{type:"warning"},on:{click:e.show_player}},[e._v("显示播放器")]),n("el-divider"),"recording"==e.nowState?n("el-button",{staticStyle:{"margin-right":"2rem"},attrs:{type:"primary"},on:{click:e.addPoint}},[e._v("添加标记点(空格键添加)")]):e._e(),"recording"==e.nowState?n("el-button",{attrs:{type:"primary"},on:{click:e.addNote}},[e._v("添加笔记")]):e._e(),"recording"==e.nowState?n("el-button",{attrs:{type:"primary"},on:{click:e.addBrief}},[e._v(" 添加记录点 ")]):e._e(),n("div",[n("ul",e._l(e.recordingInfo.points,(function(t,r){return n("el-button",{key:t.time,attrs:{type:"text"},on:{click:function(t){return e.showRecordingPoint(r)}}},[e._v(" "+e._s(t.time)+" ")])})),1)])],1)],1)},ie=[],se=n("b85c"),ce=(n("3ca3"),n("d81d"),n("99af"),n("2b3d"),n("4de4"),n("cee5")),ue=n.n(ce),le=n("cff8"),de=n.n(le),fe=n("c4e3"),pe=n.n(fe),me=n("7f81"),he=n.n(me),be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("textarea",{on:{keydown:function(t){return e.down(t)},keyup:function(t){return e.up(t)}}})])},we=[],ve={data:function(){return{timelist:[]}},watch:{timelist:function(){console.log(this.timelist)}},methods:{down:function(e){this.timelist.push({code:e.code,type:"down"})},up:function(e){this.timelist.push({code:e.code,type:"up"})},get:function(){return this.timelist}}},ge=ve,ye=Object(l["a"])(ge,be,we,!1,null,"a509bd70",null),xe=ye.exports,Re="historyBlobs",Oe="historyBlobsInfoMap",ke="tempcache",_e=Object(z["b"])(ke,ke),je="recordingInfo";var Ie,Te,Se={components:{TimeLineNote:xe},name:"HelloWorld",props:{msg:String},mounted:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.initRecorder();case 3:return e.loadHistoryIdx(),t.next=6,e.tempCacheEmpty();case 6:if(t.sent){t.next=11;break}return e.loading=!0,t.next=10,e.startFormTempCache();case 10:e.loading=!1;case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t)})))()},data:function(){return{recordType:"audio",videoStreamUrl:null,nowEditNote:{content:"",title:"",desc:""},noteContentVisible:!1,isNoteEditing:!1,loading:!1,player:null,recordingInfo:{points:[]},startTime:new Date,endTime:new Date,nowRecordInfo:null,blobs:[],mergedBlob:null,recorder:null,src:"",historyBlobsIdx:[],historyInfoMap:{},nowState:"normal",showPlayer:!1,stopping:!1}},computed:{recordTime:function(){return M(0).second(this.blobs.length).subtract(8,"hours").format("HH:mm:ss")}},asyncComputed:{playList:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.historyBlobsIdx.map(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.readHistoryItem(n);case 2:return r=t.sent,t.abrupt("return",{name:e.historyInfoMap[n].name,id:n,size:r.size,length:e.historyInfoMap[n].length,startTime:e.historyInfoMap[n].startTime});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},methods:{recordAudio:function(){if("video"==this.recordType){var e=this.$refs["record_video_player"];e.srcObject=void 0,this.initRecorder(),this.recordType="audio"}},recordVideo:function(){this.initVideoRecorder(),this.recordType="video"},initVideoRecorder:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 2:n=t.sent,r=e.$refs["record_video_player"],r.srcObject=n,r.play(),o=new MediaRecorder(n,{bitsPerSecond:128e3,audioBitrateMode:"variable",mimeType:"video/webm"}),o.ondataavailable=function(t){return e.dataavailable(t)},e.recorder=o;case 9:case"end":return t.stop()}}),t)})))()},initRecorder:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:n=t.sent,r=new MediaRecorder(n,{bitsPerSecond:128e3,audioBitrateMode:"variable",mimeType:"audio/webm"}),r.ondataavailable=function(t){return e.dataavailable(t)},e.recorder=r;case 6:case"end":return t.stop()}}),t)})))()},note_inputcontent:function(){this.noteContentVisible=!0},filesize:function(e){return ue()(e)},show_player:function(){this.showPlayer=!0},createPoint:function(e,t){var n=this.blobs.length,r=new Date;return{type:e,note:t,position:n,time:r}},formatDate:function(e){return M(e).format("YYYY-MM-DD HH:mm:ss")},secondToTime:function(e){return M(0).second(e).subtract(8,"hours").format("HH:mm:ss")},info_generate:function(e){var t=[],n=this.historyInfoMap[e];for(var r in n){var o="startTime"==r||"endTime"==r?this.formatDate(n[r]):"length"==r?this.secondToTime(n[r]):n[r];t.push("".concat(r,"：").concat(o))}return t},playlist_del:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.historyInfoMap[e],n.next=3,t.$confirm("是否要删除:"+r.name+"?");case 3:if(o=n.sent,"confirm"!=o){n.next=8;break}return e==t.nowRecordInfo.id&&t.clearNow(),n.next=8,t.removeItem(e);case 8:case"end":return n.stop()}}),n)})))()},playlist_download:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.historyInfoMap[e],t.$message.info("已开始下载："+r.name),n.t0=URL,n.next=5,t.readHistoryItem(e);case 5:return n.t1=n.sent,o=n.t0.createObjectURL.call(n.t0,n.t1),a=URL.createObjectURL(new Blob([JSON.stringify(r)])),n.next=10,t.downloadUrl(r.name+".webm",o);case 10:return URL.revokeObjectURL(o),n.next=13,t.downloadUrl(r.name+".json",a);case 13:URL.revokeObjectURL(r);case 14:case"end":return n.stop()}}),n)})))()},playlist_rename:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$prompt("请输入名称:","命名录音",{showCancelButton:!1,inputValue:t.historyInfoMap[e].name});case 2:if(r=n.sent,"confirm"!=r.action){n.next=8;break}return n.next=6,t.renameItem(e,r.value);case 6:n.next=10;break;case 8:return n.next=10,t.$alert("错误");case 10:case"end":return n.stop()}}),n)})))()},addPoint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.createPoint("point",e);this.recordingInfo.points.push(t)},addNote:function(){this.isNoteEditing=!0},addBrief:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$prompt("输入记录描述(tips):","添加记录点");case 2:n=t.sent,"confirm"==n.action?(e.nowEditNote.title=n.value,e.nowEditNote.desc=n.value,e.nowEditNote.content=n.value,e.addPoint(e.nowEditNote)):e.clearNowEditNote();case 4:case"end":return t.stop()}}),t)})))()},clearNowEditNote:function(){this.nowEditNote={title:"",desc:"",content:""}},note_confirm:function(){this.addPoint(this.nowEditNote),this.isNoteEditing=!1,this.clearNowEditNote()},onnote_cancel:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$confirm("不保存笔记？");case 2:r=n.sent,"confirm"==r&&(t.clearNowEditNote(),e());case 4:case"end":return n.stop()}}),n)})))()},note_cancel:function(){var e=this;this.onnote_cancel((function(){e.isNoteEditing=!1}))},showRecordingPoint:function(e){var t=this.recordingInfo.points[e];this.$message(JSON.stringify(t))},play:function(){var e=this.$refs.player;e.play()},play_pause:function(){var e=this.$refs.player;e.pause()},play_stop:function(){var e=this.$refs.player;e.fastSeek(0),this.play_pause()},select:function(e){var t=this;console.log(e),"recording"!=this.nowState&&"paused"!=this.nowState?(this.clearNow(),this.readHistoryItem(e).then((function(n){t.loadNow(e,n)}))):this.$message.error("不能在录音时进行播放，请先停止录音")},stateSwitch:function(e){this.nowState=e},dataavailable:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.stopping){n.next=2;break}return n.abrupt("return");case 2:return r=t.stopping,t.stopping&&(t.stopping=!1),t.blobs.push(e.data),t.endTime=new Date,console.log(e),n.next=9,t.addRecordFrame(e.data);case 9:return n.next=11,t.storeRecording();case 11:if(!r){n.next=14;break}return n.next=14,t.stop_after();case 14:case"end":return n.stop()}}),n)})))()},start:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clearNow(),e.startTime=new Date,e.endTime=new Date,e.recorder.start(1e3),t.next=6,e.storeRecording();case 6:e.stateSwitch("recording");case 7:case"end":return t.stop()}}),t)})))()},startFormTempCache:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.tempCacheEmpty();case 2:if(!t.sent){t.next=4;break}throw new Error("不存在上次记录");case 4:return t.next=6,e.loadTempCache();case 6:return e.blobs=t.sent,t.next=9,de.a.get(je);case 9:n=t.sent,e.startTime=n["startTime"],e.endTime=n["endTime"],e.recordingInfo.points=n["points"],e.recorder.start(1e3),e.stateSwitch("recording"),e.pause();case 16:case"end":return t.stop()}}),t)})))()},storeRecording:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de.a.set(je,Object(j["a"])({startTime:e.startTime,endTime:e.endTime},e.recordingInfo));case 2:case"end":return t.stop()}}),t)})))()},addRecordFrame:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.blobs.length-1,n.next=3,Object(z["g"])(r,e,_e);case 3:case"end":return n.stop()}}),n)})))()},resume:function(){var e=this.recorder;e.resume(),this.stateSwitch("recording")},pause:function(){var e=this.recorder;e.pause(),this.stateSwitch("paused")},clearTempCache:function(){return Object(I["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(z["a"])(_e);case 2:case"end":return e.stop()}}),e)})))()},tempCacheEmpty:function(){return Object(I["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(z["e"])(0,_e);case 2:return e.t0=e.sent,e.t1=void 0,e.abrupt("return",e.t0==e.t1);case 5:case"end":return e.stop()}}),e)})))()},loadTempCache:function(){return Object(I["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(z["d"])(_e);case 2:return t=e.sent,t=t.sort((function(e,t){e[0],t[0]})),n=t.map((function(e){return e[1]})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))()},stop:function(){var e=this;this.recorder.stop(),this.stopping=!0,this.stop_after().then((function(){e.stopping=!1}))},stop_after:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["delay"])(0);case 2:return e.stateSwitch("merging"),e.mergeBlobs(e.blobs),e.pushToHistory(),t.next=7,e.clearTempCache();case 7:return e.stateSwitch("stopped"),t.next=10,e.$prompt("请输入名称:","命名录音",{showCancelButton:!1,inputValue:e.nowRecordInfo.id});case 10:if(n=t.sent,"confirm"!=n.action){t.next=23;break}return r=e.nowRecordInfo.id,t.next=15,e.renameItem(e.nowRecordInfo.id,n.value);case 15:return t.t0=e,t.t1=r,t.next=19,e.readHistoryItem(r);case 19:t.t2=t.sent,t.t0.loadNow.call(t.t0,t.t1,t.t2),t.next=25;break;case 23:return t.next=25,e.$alert("错误");case 25:case"end":return t.stop()}}),t)})))()},download:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==e.src){t.next=7;break}return e.$message.info("已开始下载："+e.nowRecordInfo.name),e.downloadUrl(e.nowRecordInfo.name+".webm",e.src),n=URL.createObjectURL(new Blob([JSON.stringify(e.nowRecordInfo)])),t.next=6,e.downloadUrl(e.nowRecordInfo.name+".json",n);case 6:URL.revokeObjectURL(n);case 7:case"end":return t.stop()}}),t)})))()},downloadAll:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.$message.warning({message:"正在顺序下载所有内容",duration:0,showClose:!0}),r=Object(se["a"])(e.historyBlobsIdx),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=10;break}return a=o.value,t.next=8,e.playlist_download(a);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:n.close();case 19:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})))()},downloadAll_packed:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,i,s,c,u,l,d,f,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("zip压缩下载有总大小限制，可能导致失败与卡顿，确定使用此方式下载吗（可选择专用格式）？");case 2:if(n=t.sent,"confirm"==n){t.next=5;break}return t.abrupt("return");case 5:r=e.$message.warning({message:"正在打包......",duration:0,showClose:!0}),o=new pe.a,a=e.historyBlobsIdx,i=Object(se["a"])(a),t.prev=10,i.s();case 12:if((s=i.n()).done){t.next=24;break}return c=s.value,u=o.folder(c),l=e.historyInfoMap[c],t.next=18,e.readHistoryItem(c);case 18:d=t.sent,u.file("".concat(c,".json"),Object(E["json"])(l)),u.file("".concat(c,".webm"),d),r.message="加入记录:".concat(c);case 22:t.next=12;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t["catch"](10),i.e(t.t0);case 29:return t.prev=29,i.f(),t.finish(29);case 32:return r.message="记录加入完成，正在进行压缩......",f=e.$message.info({message:"进度:0",duration:0,showClose:!1}),t.next=36,o.generateAsync({type:"blob",compression:"STORE"},(function(e){f.message="进度:".concat(e.percent," \n 已压缩:").concat(e.currentFile)}));case 36:return p=t.sent,m=URL.createObjectURL(p),r.close(),e.$message.warning("已经开始下载打包文件"),t.next=42,e.downloadUrl("packageRecords.zip",m);case 42:URL.revokeObjectURL(m);case 43:case"end":return t.stop()}}),t,null,[[10,26,29,32]])})))()},downloadAll_packed_private:function(){},removeNow:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.playlist_del(e.nowRecordInfo.id);case 2:case"end":return t.stop()}}),t)})))()},clear:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$confirm("确定要清除所有记录吗?",{type:"warning"});case 2:n=t.sent,"confirm"==n&&e.clearHistroy();case 4:case"end":return t.stop()}}),t)})))()},downloadUrl:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new he.a({url:t,filename:e}),n.next=3,r;case 3:case"end":return n.stop()}}),n)})))()},mergeBlobs:function(e){var t=new Blob(e,{type:"audio/webm"});this.src=URL.createObjectURL(t),this.mergedBlob=t;var n="record_".concat(M(this.startTime).format("YYYY-MM-DD hh:mm:ss"),"_").concat(M(this.endTime).format("YYYY-MM-DD hh:mm:ss"));this.nowRecordInfo={name:n,id:n,startTime:this.startTime,endTime:this.endTime,timeSpanList:[],length:e.length,points:this.recordingInfo.points}},clearNow:function(){null!=this.src&&""!=this.src&&(URL.revokeObjectURL(this.src),this.src="",this.mergedBlob=null,this.blobs=[],this.nowRecordInfo=null)},loadNow:function(e,t){this.clearNow(),this.mergedBlob=t,this.blobs=[],this.nowRecordInfo=this.historyInfoMap[e],this.src=URL.createObjectURL(t)},pushToHistory:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1==e.historyBlobsIdx.indexOf(e.nowRecordInfo.id)){t.next=2;break}throw new Error("已经存在同名历史记录");case 2:if(null!=e.mergedBlob&&null!=e.nowRecordInfo.id){t.next=4;break}throw new Error("错误调用");case 4:return t.next=6,e.addItem(e.nowRecordInfo,e.mergedBlob);case 6:case"end":return t.stop()}}),t)})))()},addItem:function(e,t){var n=this;return Object(I["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.historyBlobsIdx.push(e.id),de()(Re,n.historyBlobsIdx),n.historyInfoMap[e.id]=e,de()(Oe,n.historyInfoMap),r.next=6,Object(z["g"])(Re+e.id,t);case 6:case"end":return r.stop()}}),r)})))()},loadHistoryIdx:function(){de.a.has(Re)?this.historyBlobsIdx=de.a.get(Re):this.historyBlobsIdx=[],de.a.has(Oe)?this.historyInfoMap=de.a.get(Oe):this.historyInfoMap={}},clearHistroy:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(se["a"])(e.historyBlobsIdx),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return o=r.value,t.next=7,Object(z["c"])(Re+o);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:de.a.remove(Re),de.a.remove(Oe),e.clearNow(),e.loadHistoryIdx();case 21:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))()},readHistoryItem:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(-1!=t.historyBlobsIdx.indexOf(e)){n.next=2;break}throw new Error("记录"+e+"不存在");case 2:return n.next=4,Object(z["e"])(Re+e);case 4:return r=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},removeItem:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(-1!=t.historyBlobsIdx.indexOf(e)){n.next=2;break}throw new Error("没有这个记录");case 2:return t.historyBlobsIdx=t.historyBlobsIdx.filter((function(t){return t!=e})),delete t.historyInfoMap[e],de.a.set(Oe,t.historyInfoMap),de.a.set(Re,t.historyBlobsIdx),n.next=8,Object(z["c"])(Re+e);case 8:case"end":return n.stop()}}),n)})))()},renameItem:function(e,t){var n=this;return Object(I["a"])(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(-1!=n.historyBlobsIdx.indexOf(e)){r.next=2;break}throw new Error("没有这个记录");case 2:return r.next=4,n.readHistoryItem(e);case 4:return o=r.sent,a=n.historyInfoMap[e],r.next=8,n.removeItem(e);case 8:return a.name=t,r.next=11,n.addItem(a,o);case 11:case"end":return r.stop()}}),r)})))()}}},Ne=Se,Be=(n("0a87"),Object(l["a"])(Ne,ae,ie,!1,null,"448a28ba",null)),Ee=Be.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",e._l(e.historyInfos,(function(t,r){return n("li",{key:r},[e._v(e._s(JSON.stringify(t)))])})),0),e._v(" "+e._s(e.recordingLength)+" "),n("el-button",{on:{click:e.startNew}},[e._v("开始")]),n("el-button",{on:{click:e.resume}},[e._v("继续")]),n("el-button",{on:{click:e.pause}},[e._v("暂停")]),n("el-button",{on:{click:function(t){return e.saveRecording()}}},[e._v("开始")])],1)},De=[],He={data:function(){return{}},mounted:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ensureInitHistory();case 2:case"end":return t.stop()}}),t)})))()},computed:Object(j["a"])(Object(j["a"])(Object(j["a"])({},Object(O["d"])("recorder",["recordingLength"])),Object(O["d"])("history",["historyIdxs"])),Object(O["e"])("history",["historyInfos"])),methods:Object(j["a"])(Object(j["a"])({},Object(O["c"])("recorder",["startNew","pause","saveRecording","resume"])),Object(O["c"])("history",["ensureInitHistory"]))},$e=He,Ce=Object(l["a"])($e,Me,De,!1,null,"402d414c",null),Le=Ce.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" "+e._s(e.countA)+" "+e._s(e.hello)+" "),n("el-button",{attrs:{type:"primary"},on:{click:e.test}},[e._v("+1")]),n("div",[e._v(" "+e._s(e.countAdd)+" ")])],1)},Pe=[],Ae=n("257e"),Ye=n("262e"),ze=n("2caf"),Ve=n("2fe1"),Fe=(Ie=Object(Ve["a"])({computed:Object(j["a"])(Object(j["a"])({},Object(O["e"])(["countA"])),{},{hello:function(){return this.countAdd+this.$store.state.countA}})}),Ie(Te=function(e){Object(Ye["a"])(n,e);var t=Object(ze["a"])(n);function n(){var e;Object(T["a"])(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),Object(N["a"])(Object(Ae["a"])(e),"count",0),e}return Object(S["a"])(n,[{key:"countAdd",get:function(){return this.count+1}},{key:"test",value:function(){this.count++,this.$store.commit("increment")}},{key:"mounted",value:function(){alert("hello")}}]),n}(r["default"]))||Te),Xe=Fe,Je=Xe,qe=Object(l["a"])(Je,Ue,Pe,!1,null,"b151066e",null),We=qe.exports,Ge=n("b2d8"),Ke=n.n(Ge),Qe=(n("64e1"),n("660e"));r["default"].config.productionTip=!1,r["default"].use(w),r["default"].use(v["a"]),r["default"].use(x["a"]),r["default"].use(O["b"]);var Ze=re();r["default"].use(oe["a"]);var et=[{path:"/",component:Ee},{path:"/center",component:We},{path:"/new",component:Le}],tt=new oe["a"]({routes:et});r["default"].use(y.a,{name:"ls",bind:!0}),r["default"].use(Ke.a),r["default"].use(Qe["a"],{breakpoints:{sm:450,md:950,lg:1/0},defaultBreakpoint:"sm"}),new r["default"]({render:function(e){return e(b)},store:Ze,router:tt}).$mount("#app")},"85ec":function(e,t,n){},"9a51":function(e,t,n){}});
//# sourceMappingURL=app.5f26f451.js.map